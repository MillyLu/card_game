(()=>{"use strict";window.game={},window.game.level=localStorage.level,window.game;const e=["spades_A","spades_K","spades_Q","spades_J","spades_10","spades_9","spades_8","spades_7","spades_6","hearts_A","hearts_K","hearts_Q","hearts_J","hearts_10","hearts_9","hearts_8","hearts_7","hearts_6","diamonds_A","diamonds_K","diamonds_Q","diamonds_J","diamonds_10","diamonds_9","diamonds_8","diamonds_7","diamonds_6","clubs_A","clubs_K","clubs_Q","clubs_J","clubs_10","clubs_9","clubs_8","clubs_7","clubs_6"];let t;e.sort((()=>Math.random()-.5)),console.log(e),function(n){n.textContent="";const a=document.createElement("div");a.classList.add("choose");const s=document.createElement("h2");s.classList.add("choose__title"),s.textContent="Выбери сложность";const d=document.createElement("div");d.classList.add("choose__level");const l=document.createElement("a");l.classList.add("choose__level_1","level"),l.textContent="1";const o=document.createElement("a");o.classList.add("choose__level_2","level"),o.textContent="2";const i=document.createElement("a");i.classList.add("choose__level_3","level"),i.textContent="3",d.appendChild(l),d.appendChild(o),d.appendChild(i);const c=document.createElement("button");c.classList.add("choose__btn"),c.textContent="Старт",a.appendChild(s),a.appendChild(d),a.appendChild(c),n.appendChild(a),document.querySelectorAll(".level").forEach((a=>{a.addEventListener("click",(a=>{a.preventDefault();const s=a.target;t=s.textContent,localStorage.setItem("level",t),function(t){t.textContent="";const n=document.createElement("div");n.classList.add("header");const a=document.createElement("div");a.classList.add("timer");const s=document.createElement("div");s.classList.add("timer__naming");const d=document.createElement("p");d.classList.add("timer__name","timer__name_min"),d.textContent="min";const l=document.createElement("p");l.classList.add("timer__name","timer__name_sek"),l.textContent="sek",s.appendChild(d),s.appendChild(l);const o=document.createElement("h2");o.classList.add("timer__time"),o.textContent="00.00",a.appendChild(s),a.appendChild(o);const i=document.createElement("button");i.classList.add("header__btn"),i.textContent="Начать заново",n.appendChild(a),n.appendChild(i),t.appendChild(n);const c=document.createElement("div");c.classList.add("card__field");let r,m=document.createDocumentFragment();"1"===window.localStorage.level?r=12:"2"===window.localStorage.level?r=24:"3"===window.localStorage.level&&(r=36);for(let e=0;e<r;e++){const e=document.createElement("div");e.classList.add("card__field_card");const t=document.createElement("img");t.classList.add("image_back"),t.setAttribute("src","static/image/рубашка.png");const n=document.createElement("img");n.classList.add("image_front"),e.appendChild(t),e.appendChild(n),m.appendChild(e)}c.appendChild(m),t.appendChild(c);let _=document.querySelectorAll(".card__field_card"),u=(h=r/2,(p=e).sort((function(){return Math.random()>.5})),p.length=h,p);var p,h;let v=[...u,...u];console.log(v);let g=v.sort((()=>Math.random()-.5));console.log(g);const E=document.querySelectorAll(".image_front"),f=document.querySelectorAll(".image_back");for(let e=0;e<g.length;e++)E.forEach((t=>{t.setAttribute("data-card",g[e++]);let n=t.dataset;t.setAttribute("src",`static/image/${String(n.card)}.png`)}));let b=setTimeout((()=>{E.forEach((e=>{e.style.visibility="visible"}))}),0);setTimeout((()=>{clearTimeout(b),E.forEach((e=>{e.style.transform="rotateY(3.142rad)",e.style.visibility="hidden"}))}),5e3),_.forEach((e=>{e.addEventListener("onclick",(()=>{}))}));let C,L,y=!1,S=!1,x=function(e){let t=e.target;if(console.dir(t),!S&&this!==C)return t.classList.add("flip"),t.nextElementSibling.style.visibility="visible",t.nextElementSibling.style.transform="rotateY(3.142rad)",y?"undefined"!==C?(L=t.nextElementSibling,console.log(C.dataset.card),console.log(L.dataset.card),void function(){if(C.dataset.card===L.dataset.card)return console.log(C.dataset.card),console.log(L.dataset.card),C.removeEventListener("click",x),L.removeEventListener("click",x),w(),void(Array.from(f).every((e=>e.classList.contains("flip")))&&alert("Вы выиграли!"));S=!0,setTimeout((()=>{C.previousElementSibling.classList.remove("flip"),C.style.visibility="hidden",L.previousElementSibling.classList.remove("flip"),L.style.visibility="hidden",S=!1,S=!1,w()}),1500)}()):void 0:(y=!0,void(C=t.nextElementSibling))};function w(){[y,S]=[!1,!1],[C,L]=[void 0,void 0]}_.forEach((e=>{e.addEventListener("click",x)}))}(n)}))})),c.addEventListener("click",(e=>{e.preventDefault(),window.location.href="game.html"}))}(document.querySelector(".app"))})();