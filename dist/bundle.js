(()=>{"use strict";window.game={},window.game.level=localStorage.level,window.game;var e,t,n=0,a=0;function d(){l()}function i(){++n>=60&&(a++,n-=60),document.getElementById("time").textContent=(a>9?a:"0"+a)+":"+(n>9?n:"0"+n),l()}function l(){t=setTimeout(i,1e3)}var s=function(){return document.getElementById("time").textContent="00:00",clearTimeout(t),e=(a>9?a:"0"+a)+":"+(n>9?n:"0"+n),n=0,a=0,e};function c(e,t){var n=document.querySelector(".app"),a=document.querySelector(".container"),d=document.createElement("div");d.classList.add("opacity");var i=document.createElement("div");i.classList.add("result");var l=document.createElement("img");l.classList.add("result__img");var s=document.createElement("h2");"win"===e?(l.setAttribute("src","static/image/win.png"),s.classList.add("result__title","result__title_win"),s.textContent="Вы выиграли!"):(l.setAttribute("src","static/image/lose.png"),s.classList.add("result__title","result__title_lose"),s.textContent="Вы проиграли!");var c=document.createElement("p");c.classList.add("result__time"),c.textContent="Затраченное время";var r=document.createElement("h2");r.classList.add("result__timer"),r.textContent=t;var o=document.createElement("button");o.classList.add("result__button"),o.textContent="Играть снова",i.appendChild(l),i.appendChild(s),i.appendChild(c),i.appendChild(r),i.appendChild(o),null==a||a.appendChild(d),null==n||n.appendChild(i),o.addEventListener("click",(function(e){e.preventDefault(),d.classList.add("hidden"),m(document.querySelector(".app"))}))}var r,o=function(e,t,n){if(n||2===arguments.length)for(var a,d=0,i=t.length;d<i;d++)!a&&d in t||(a||(a=Array.prototype.slice.call(t,0,d)),a[d]=t[d]);return e.concat(a||Array.prototype.slice.call(t))};function m(t){t.textContent="";var n=document.createElement("div");n.classList.add("choose");var a=document.createElement("h2");a.classList.add("choose__title"),a.textContent="Выбери сложность";var i=document.createElement("div");i.classList.add("choose__level");var l=document.createElement("a");l.classList.add("choose__level_1","level"),l.textContent="1";var u=document.createElement("a");u.classList.add("choose__level_2","level"),u.textContent="2";var _=document.createElement("a");_.classList.add("choose__level_3","level"),_.textContent="3",i.appendChild(l),i.appendChild(u),i.appendChild(_);var v=document.createElement("button");v.classList.add("choose__btn"),v.textContent="Старт",n.appendChild(a),n.appendChild(i),n.appendChild(v),t.appendChild(n),document.querySelectorAll(".level").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault();var t=e.target;r=t.textContent,localStorage.setItem("level",r)}))})),v.addEventListener("click",(function(n){n.preventDefault(),function(t){t.textContent="";var n=document.createElement("div");n.classList.add("header");var a=document.createElement("div");a.classList.add("timer");var i=document.createElement("div");i.classList.add("timer__naming");var l=document.createElement("p");l.classList.add("timer__name","timer__name_min"),l.textContent="min";var r=document.createElement("p");r.classList.add("timer__name","timer__name_sek"),r.textContent="sek",i.appendChild(l),i.appendChild(r);var u=document.createElement("p");u.classList.add("timer__time"),u.setAttribute("id","time"),u.textContent="00.00",a.appendChild(i),a.appendChild(u);var _=document.createElement("button");_.classList.add("header__btn"),_.textContent="Начать заново",n.appendChild(a),n.appendChild(_),t.appendChild(n);var v=document.createElement("div");v.classList.add("card__field");var p,h=document.createDocumentFragment();"1"===window.localStorage.level?p=12:"2"===window.localStorage.level?p=24:"3"===window.localStorage.level&&(p=36);for(var f=0;f<p;f++){var g=document.createElement("div");g.classList.add("card__field_card");var E=document.createElement("img");E.classList.add("image_back"),E.setAttribute("src","static/image/рубашка.png");var C=document.createElement("img");C.classList.add("image_front"),g.appendChild(E),g.appendChild(C),h.appendChild(g)}v.appendChild(h),t.appendChild(v);var L=[],b=[],y=[],x=["spades_A","spades_K","spades_Q","spades_J","spades_10","spades_9","spades_8","spades_7","spades_6","hearts_A","hearts_K","hearts_Q","hearts_J","hearts_10","hearts_9","hearts_8","hearts_7","hearts_6","diamonds_A","diamonds_K","diamonds_Q","diamonds_J","diamonds_10","diamonds_9","diamonds_8","diamonds_7","diamonds_6","clubs_A","clubs_K","clubs_Q","clubs_J","clubs_10","clubs_9","clubs_8","clubs_7","clubs_6"];x.sort((function(){return Math.random()-.5}));var S,A,w=document.querySelectorAll(".card__field_card");A=p/2,(S=x).sort((function(){return Math.random()>.5})),S.length=A,b=o(o([],L=S,!0),L,!0),console.log(b),y=b.sort((function(){return Math.random()-.5})),console.log(y);for(var k,q=document.querySelectorAll(".image_front"),T=document.querySelectorAll(".image_back"),D=function(e){q.forEach((function(t){t.setAttribute("data-card",y[e++]);var n=t.dataset;t.setAttribute("src","static/image/".concat(String(n.card),".png"))})),k=e},J=0;J<y.length;J++)D(J),J=k;var K=setTimeout((function(){q.forEach((function(e){e.style.visibility="visible"}))}),0);setTimeout((function(){clearTimeout(K),q.forEach((function(e){e.style.visibility="hidden"})),p=0,L=[],b=[],y=[],d()}),5e3),w.forEach((function(e){e.addEventListener("onclick",(function(){}))}));var Q,I,M=!1,B=!1,F=function(t){var n=t.target;if(console.dir(n),!B&&n!==Q)return n.classList.add("flip"),n.nextElementSibling.style.visibility="visible",M?"undefined"!==Q?(I=n.nextElementSibling,console.log(Q.dataset.card),console.log(I.dataset.card),void function(){if(Q.dataset.card===I.dataset.card)return console.log(Q.dataset.card),console.log(I.dataset.card),Q.removeEventListener("click",F),I.removeEventListener("click",F),j(),void(Array.from(T).every((function(e){return e.classList.contains("flip")}))&&(s(),c("win",e)));s(),c("lose",e),B=!0,setTimeout((function(){Q.previousElementSibling.classList.remove("flip"),Q.style.visibility="hidden",I.previousElementSibling.classList.remove("flip"),I.style.visibility="hidden",B=!1,B=!1,j()}),1500)}()):void 0:(M=!0,void(Q=n.nextElementSibling))};function j(){var e,t;M=(e=[!1,!1])[0],B=e[1],Q=(t=[void 0,void 0])[0],I=t[1]}w.forEach((function(e){null==e||e.addEventListener("click",F)})),_.addEventListener("click",(function(e){e.preventDefault(),s(),m(document.querySelector(".app"))}))}(t)}))}m(document.querySelector(".app"))})();